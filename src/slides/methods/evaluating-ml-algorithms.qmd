---
title: "Evaluating Machine Learning Algorithms"
subtitle: "SUBTITLE"
author: Vladislav Morozov  
format:
  revealjs:
    include-in-header: 
      text: |
        <meta name="description" content="Learn how to evaluate (lecture note slides)"/> 
    width: 1150
    slide-number: true
    sc-sb-title: true
    incremental: true   
    logo: ../../themes/favicon.ico
    footer: "Evaluating Predictive Algorithms"
    footer-logo-link: "https://vladislav-morozov.github.io/simulations-course/"
    theme: ../../themes/slides_theme.scss
    toc: TRUE
    toc-depth: 2
    toc-title: Contents
    transition: convex
    transition-speed: fast
slide-level: 4
title-slide-attributes:
    data-background-color: "#3c165cff"
    data-footer: " "
filters:
  - reveal-header 
embed-resources: true
include-in-header: ../../themes/mathjax.html 
highlight-style: tango
open-graph:
    description: "Learn how to evaluate (lecture note slides)" 
---






## Introduction {background="#00100F"}

```{python}
import matplotlib.pyplot as plt

from itertools import product

from sklearn.datasets import make_classification

BG_COLOR = "whitesmoke"
```

### Lecture Info {background="#43464B"}

#### Learning Outcomes

This lecture is about evaluating machine learning algorithms

<br>

By the end, you should be able to

 

- Understand 

### Lecture Example: Dealing with Class Imbalance {background="#43464B"}

#### Problem of Class Imbalance in Classification

Setting of today: classification with class imbalance

<br>

Empirically know that class imbalance may cause bias towards the majority classes, leading to

- Poor generalization
- Misleading accuracy metrics
- Potentially incorrect policy recommendations


#### Example Datasets With Different Imbalances

::: {.nonincremental}

- Two class example
- Each row: progressively stronger class imbalance

:::

```{python}
N_ROWS = 3
N_COLS = 4
fig, axs = plt.subplots(nrows=N_ROWS, ncols=N_COLS, figsize=(16,5))
fig.patch.set_color(BG_COLOR)
for row_id, col_id in product(range(N_ROWS), range(N_COLS)):
    X, y = make_classification(
      n_samples=300,
      n_features=2,
      n_redundant=0,
      weights=[0.95 - 0.4*(N_ROWS - 1 - row_id)/(N_ROWS-1), 0.05 + 0.4*(N_ROWS - 1 - row_id)/(N_ROWS-1)],
      class_sep=1.7,
      flip_y=0.05,
      random_state= 67*row_id + 237*col_id
    )
    axs[row_id, col_id].scatter(X[y==1, 0], X[y==1, 1], color='gold', marker='x')
    axs[row_id, col_id].scatter(X[y==0, 0], X[y==0, 1], color='#3c165c')
    axs[row_id, col_id].set_xticks([]) 
    axs[row_id, col_id].set_yticks([]) 
```


#### Solutions to Class Imbalance

There are some solutions:

- Undersampling majority classes (throwing away data)
- Oversample minority classes (possibly with synthetic examples)
- Biasing algorithms towards minority classes by modifying training (e.g. weights in objective functions)

::: {.left-color}

Which of these are better?

:::

#### Goal of Today: Evaluating Solutions

<br>

Today:

::: {.left-color}

Compact simulation in low-dimensional setting comparing

- Not doing anything
- Synthetic oversampling
- Weights in objective function

:::



## Theory Essentials for Evaluating ML Algorithms {background="#00100F"}
  
### Core Concepts {background="#43464B"}


####

#### Further Points

Many other things, e.g. time series

### Evaluation Metrics {background="#43464B"}


## Simulation Design {background="#00100F"}

#### DGP

Try a couple of degrees of imbalance

#### Algorithms Considered

#### Approaches for Dealing with Class Imbalance


#### Metrics


## Simulation Implementation and Solutions {background="#00100F"}
  
### Implementation {background="#43464B"}

#### Overall Organization Strategy

Again a more complex setting with possible desire to 

#### Runner Design

Do a bit differently: use the same dataset for all 

Makes

#### Our `SimulationRunner`

#### What `SimulationRunner` Does



### Results {background="#43464B"}

#### Results

#### References 
  
::: {.nonincremental}
 
:::
 
 

## Recap and Conclusions {background="#00100F"}
 
#### Recap

<br>

In this lecture we 

- Reviewed  
 


#### References {.allowframebreaks visibility="uncounted"}

::: {#refs}
:::
